<div class="page-header">
  <h1>
    Confirmed Route Poolings
  </h1>
  <h4>
  </h4>
</div>

<div class="row">
  <div class="col-md-12">

    <% @poolings%>

    <table class="table table-striped table-hover">
      <tr>
        <th>Date</th>
        <th>Origin</th>
        <th>Destination</th>
        <th>Destination Arrival Time</th>
        <th>Passengers IDs</th>
        <th>Passengers pooled</th>
        <th>Route confirmed</th>

      </tr>
      <% @poolings.each do |route_pooling| %>
      <tr>
        <% route_pooling[2] = RouteRequest.where(origin_place: route_pooling[0][1], destination_place: route_pooling[0][2], origin_departure_date: route_pooling[0][0], destination_arrival_time_interval: route_pooling[0][3]).pluck(:user_id)%>
        <% if route_pooling[1]>= 3 && route_pooling[2].include?(current_user.id)%>
        <td><%= route_pooling[0][0] %></td>
        <td><%= route_pooling[0][1] %></td>
        <td><%= route_pooling[0][2] %></td>
        <td><%= route_pooling[0][3] %></td>
        <td><%= route_pooling[2] %></td>
        <td><%= route_pooling[1] %></td>
        <td><%= route_pooling[3] = true %></td> <!-- Logic Pending -->

        <%  end%>
        <% end %>


      </table>

    </div>
  </div>
